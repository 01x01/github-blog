---
title: 初始化 tornado 项目
date: 2019-06-27 14:20:24
tags: tornado
category: tornado
---
初始化 `tornado` 项目
<-- more -->
# 项目结构
```
tornado-blog
  ---blog
   -- index 
   	- __init__.py
   	- handlers.py  : 存放处理请求的逻辑函数
   -- auth 
   -- statics	   ：存放静态 css 文件
   -- templates	   ：存放 html 模板
   routes.py       ：存放 url
   models.py       ：ORM 数据库 
  ---venv
  server.py        ：启动服务
  application.py   ：application 配置文件
```

# 配置文件
```py
# coding: utf-8 
# application.py 
# this is configuration for tornado project 

import os 
from blog.routes import urls
from tornado.web import Application

settings = dict(
    template_path = os.path.join(os.path.dirname(__file__),"blog","template"),
    static_path = os.path.join(os.path.dirname(__file__),"blog","static"),
    debug = True
)

app = Application(
    handlers= urls,
    **settings
)
```
# 启动 server 配置
```py
'''
tornado.httpserver：这个模块就是用来解决 web 服务器的 http 协议问题，它提供了不少属性方法，实现客户端和服务器端的互通。Tornado 的非阻塞、单线程的特点在这个模块中体现。
tornado.ioloop：这个也非常重要，能够实现非阻塞 socket 循环，不能互通一次就结束呀。
tornado.options：这是命令行解析模块，也常用到。
tornado.web：这是必不可少的模块，它提供了一个简单的 Web 框架与异步功能，从而使其扩展到大量打开的连接，使其成为理想的长轮询。
'''
from tornado import httpserver
from tornado.ioloop import IOLoop
from tornado.options import define,options
from application import app



if __name__ == "__main__":
    define("port",default=8000, help="the server run on 8000", type=int)
    options.parse_command_line()
    http_server = httpserver.HTTPServer(app)
    http_server.listen(options.port)
    print("The server running on {}".format(options.port))
    print("Quit the server with Control+C")
    IOLoop.instance().start()
```

# 简单测试

配置 `routes.py` 和 `index/handlers.py` 进行测试
```py
# coding: utf-8 
# routes.py 
# this is urls setting for this project

from .index.handlers import IndexRequestHandler
from tornado.web import url
urls = [
   url(r'/',IndexRequestHandler,name="index")
]
```
配置请求
```py
# coding: utf-8
# index.handlers.py
# this file is for handle all index model's requests 

from tornado.web import RequestHandler

class IndexRequestHandler(RequestHandler):

    def get(self):
        self.write("Hello tornado!")

```
打开页面 `http://127.0.0.1:8000/`
![tornado1](/postimg/tornado1.png)
